<div id="wp-custom-wrapper" style="width: 90% !important; margin: 0 auto !important; padding: 0; line-height: normal;">
    <div id="github-menu-loader"></div>
</div>

<script>
  (async function loadWerewolfMenu() {
    const container = document.getElementById('github-menu-loader');
    
    // Path to your Menu-bar.html in the PSN repo root
    // Added ?t= timestamp to bypass CDN caching for instant updates
    const menuUrl = 'https://cdn.jsdelivr.net/gh/KFruti88/PSN@main/Menu-bar.html?t=' + Date.now();

    try {
      const response = await fetch(menuUrl);
      if (!response.ok) throw new Error('Network response was not ok');
      const html = await response.text();
      
      // Inject the HTML
      container.innerHTML = html;

      // EXECUTING SCRIPTS: GitHub/CDN fetched HTML won't run <script> tags by default
      // This loop finds them and forces them to execute (important for your Twitch Sync)
      const scripts = container.querySelectorAll('script');
      scripts.forEach(oldScript => {
        const newScript = document.createElement('script');
        Array.from(oldScript.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value));
        newScript.appendChild(document.createTextNode(oldScript.innerHTML));
        oldScript.parentNode.replaceChild(newScript, oldScript);
      });

    } catch (err) {
      console.error('Menu Load Failed:', err);
      container.innerHTML = '<div style="color:#FE4B03; text-align:center; padding:20px; font-weight:bold;">CONNECTION TO GITHUB FAILED</div>';
    }
  })();
</script>

<style>
  /* Keeps the loader tight so there is no jump when the menu pops in */
  #github-menu-loader { margin: 0; padding: 0; display: block; }
  
  /* Ensuring the Divi parent frames don't add their own height while loading */
  .et_pb_code { line-height: 0 !important; }
</style>
